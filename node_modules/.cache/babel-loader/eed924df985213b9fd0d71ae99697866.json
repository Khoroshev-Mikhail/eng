{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nconst initialWord = {\n  id: 0,\n  eng: '',\n  rus: '',\n  img: '',\n  audio: ''\n};\nconst errorWord = {\n  id: 0,\n  eng: 'Error on the server.',\n  rus: 'Ошибка на сервере.',\n  img: '404.jpg',\n  //Или другие\n  audio: '404.mp3' //Или другие\n};\n\nconst initialState = {\n  trueVariant: initialWord,\n  falseVariants: [initialWord, initialWord, initialWord]\n};\nconst errorState = {\n  trueVariant: errorWord,\n  falseVariants: [initialWord, initialWord, initialWord]\n};\nexport const getLearningThunk = createAsyncThunk('Thunk: getLearning', async function (payload, thunkAPI) {\n  const {\n    user\n  } = thunkAPI.getState();\n  const response = await fetch(`http://localhost:3002/${user.id}/unlerned/${payload.method}/group/${payload.id}`);\n  const data = await response.json();\n  return data;\n});\nexport const learningSlice = createSlice({\n  name: 'Slice: Learning',\n  initialState: initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(getLearningThunk.fulfilled, (_, action) => action.payload);\n    builder.addCase(getLearningThunk.rejected, (_, __) => errorState);\n  }\n});\nexport const trueVariant = state => state.learning.trueVariant;\nexport const falseVariants = state => state.learning.falseVariant;","map":{"version":3,"names":["createAsyncThunk","createSlice","initialWord","id","eng","rus","img","audio","errorWord","initialState","trueVariant","falseVariants","errorState","getLearningThunk","payload","thunkAPI","user","getState","response","fetch","method","data","json","learningSlice","name","reducers","extraReducers","builder","addCase","fulfilled","_","action","rejected","__","state","learning","falseVariant"],"sources":["/Users/tatanaarhipova/MikeIT/eng/src/app/newApi/learningAPI.tsx"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\nimport { Learning, Method, User, Word } from '../types/types'\nimport { RootState } from '../store'\n\nconst initialWord: Word = {\n    id: 0,\n    eng: '',\n    rus: '',\n    img: '',\n    audio: '',\n}\nconst errorWord: Word = {\n    id: 0,\n    eng: 'Error on the server.',\n    rus: 'Ошибка на сервере.',\n    img: '404.jpg', //Или другие\n    audio: '404.mp3', //Или другие\n}\nconst initialState: Learning = {\n    trueVariant: initialWord,\n    falseVariants: [ initialWord, initialWord, initialWord ]\n}\nconst errorState: Learning = {\n    trueVariant: errorWord,\n    falseVariants: [ initialWord, initialWord, initialWord ]\n}\nexport const getLearningThunk = createAsyncThunk<Learning, { method: Method, id: number }, { state: RootState }>(\n    'Thunk: getLearning',\n    async function(payload: { method: Method, id: number }, thunkAPI) {\n        const { user } = thunkAPI.getState() as { user: User}\n        const response = await fetch(`http://localhost:3002/${user.id}/unlerned/${payload.method}/group/${payload.id}`)\n        const data = await response.json()\n        return data\n    }\n)\nexport const learningSlice = createSlice<Learning, {}>({\n    name: 'Slice: Learning',\n    initialState: initialState,\n    reducers: {},\n    extraReducers: (builder) => {\n        builder.addCase(getLearningThunk.fulfilled, (_, action) => action.payload)\n        builder.addCase(getLearningThunk.rejected, (_, __) => errorState)\n    }\n})\n\nexport const trueVariant = (state: RootState) => state.learning.trueVariant;\nexport const falseVariants = (state: RootState) => state.learning.falseVariant;"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAIhE,MAAMC,WAAiB,GAAG;EACtBC,EAAE,EAAE,CAAC;EACLC,GAAG,EAAE,EAAE;EACPC,GAAG,EAAE,EAAE;EACPC,GAAG,EAAE,EAAE;EACPC,KAAK,EAAE;AACX,CAAC;AACD,MAAMC,SAAe,GAAG;EACpBL,EAAE,EAAE,CAAC;EACLC,GAAG,EAAE,sBAAsB;EAC3BC,GAAG,EAAE,oBAAoB;EACzBC,GAAG,EAAE,SAAS;EAAE;EAChBC,KAAK,EAAE,SAAS,CAAE;AACtB,CAAC;;AACD,MAAME,YAAsB,GAAG;EAC3BC,WAAW,EAAER,WAAW;EACxBS,aAAa,EAAE,CAAET,WAAW,EAAEA,WAAW,EAAEA,WAAW;AAC1D,CAAC;AACD,MAAMU,UAAoB,GAAG;EACzBF,WAAW,EAAEF,SAAS;EACtBG,aAAa,EAAE,CAAET,WAAW,EAAEA,WAAW,EAAEA,WAAW;AAC1D,CAAC;AACD,OAAO,MAAMW,gBAAgB,GAAGb,gBAAgB,CAC5C,oBAAoB,EACpB,gBAAec,OAAuC,EAAEC,QAAQ,EAAE;EAC9D,MAAM;IAAEC;EAAK,CAAC,GAAGD,QAAQ,CAACE,QAAQ,EAAmB;EACrD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,yBAAwBH,IAAI,CAACb,EAAG,aAAYW,OAAO,CAACM,MAAO,UAASN,OAAO,CAACX,EAAG,EAAC,CAAC;EAC/G,MAAMkB,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAI,EAAE;EAClC,OAAOD,IAAI;AACf,CAAC,CACJ;AACD,OAAO,MAAME,aAAa,GAAGtB,WAAW,CAAe;EACnDuB,IAAI,EAAE,iBAAiB;EACvBf,YAAY,EAAEA,YAAY;EAC1BgB,QAAQ,EAAE,CAAC,CAAC;EACZC,aAAa,EAAGC,OAAO,IAAK;IACxBA,OAAO,CAACC,OAAO,CAACf,gBAAgB,CAACgB,SAAS,EAAE,CAACC,CAAC,EAAEC,MAAM,KAAKA,MAAM,CAACjB,OAAO,CAAC;IAC1Ea,OAAO,CAACC,OAAO,CAACf,gBAAgB,CAACmB,QAAQ,EAAE,CAACF,CAAC,EAAEG,EAAE,KAAKrB,UAAU,CAAC;EACrE;AACJ,CAAC,CAAC;AAEF,OAAO,MAAMF,WAAW,GAAIwB,KAAgB,IAAKA,KAAK,CAACC,QAAQ,CAACzB,WAAW;AAC3E,OAAO,MAAMC,aAAa,GAAIuB,KAAgB,IAAKA,KAAK,CAACC,QAAQ,CAACC,YAAY"},"metadata":{},"sourceType":"module"}